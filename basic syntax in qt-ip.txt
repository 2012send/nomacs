	QVector<QRgb> table(256);
	for(int i=0;i<256;++i)
		table[i]=qRgb(i,i,i);

	QImage retImg(img.width(),img.height(),QImage::Format_Indexed8);
	retImg.setColorTable(table);

	for(int i =0; i< img.width();i++)	
	  for(int j=0; j< img.height();j++)
	  {
		QRgb value = img.pixel(i,j);
		retImg.setPixel(i,j,qGray(value));
	  }
